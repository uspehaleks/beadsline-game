{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///D:/BeadsLine/server/db.ts"],"sourcesContent":["import { Pool, Client } from 'pg';\nimport { drizzle } from 'drizzle-orm/node-postgres';\nimport { drizzle as drizzleWithLogger } from 'drizzle-orm/node-postgres';\nimport * as schema from \"../shared/schema.js\";\n\n// Определяем URL для подключения в зависимости от назначения\nconst DATABASE_URL = process.env.DATABASE_URL;\nconst DIRECT_URL = process.env.DIRECT_URL || DATABASE_URL; // Используем DIRECT_URL для миграций, если доступен\n\nif (!DATABASE_URL) {\n  console.error(\"DATABASE_URL is not set!\");\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\n// Функция для извлечения хоста и порта из URL\nfunction parseConnectionString(connectionString: string) {\n  try {\n    const url = new URL(connectionString);\n    return {\n      host: url.hostname,\n      port: url.port || '5432', // по умолчанию PostgreSQL использует 5432\n      fullUrl: connectionString\n    };\n  } catch (error) {\n    console.error(\"Error parsing connection string:\", error);\n    return {\n      host: 'unknown',\n      port: 'unknown',\n      fullUrl: connectionString\n    };\n  }\n}\n\n// Добавляем sslmode=require к строке подключения, если его нет\nfunction ensureSslMode(connectionString: string): string {\n  if (!connectionString.includes('sslmode=')) {\n    return connectionString + (connectionString.includes('?') ? '&' : '?') + 'sslmode=require';\n  }\n  return connectionString;\n}\n\n// Определяем, какой URL использовать для основного подключения\nconst connectionTarget = ensureSslMode(DATABASE_URL);\nconst { host, port } = parseConnectionString(connectionTarget);\n\nconsole.log(\"Attempting to connect to database...\");\nconsole.log(\"Connecting to host:\", host, \"on port:\", port);\nconsole.log(\"DATABASE_URL exists:\", !!DATABASE_URL);\nconsole.log(\"DIRECT_URL exists:\", !!process.env.DIRECT_URL);\nconsole.log(\"DATABASE_URL being used:\", DATABASE_URL ? DATABASE_URL.substring(0, 50) + \"...\" : \"UNDEFINED\");\n\n// Для совместимости с существующим кодом (например, для сессий)\n// создаем пул с минимальными настройками для serverless\nexport const pool = new Pool({\n  connectionString: connectionTarget,\n  ssl: {\n    rejectUnauthorized: false\n  },\n  // Минимальные настройки для serverless\n  connectionTimeoutMillis: 1000,\n  idleTimeoutMillis: 5000,\n  max: 1 // Только одно соединение\n});\n\n// Для serverless среды Vercel используем Client вместо Pool для выполнения запросов\n// Создаем функцию для получения соединения по требованию\nexport async function getDbClient() {\n  const client = new Client({\n    connectionString: connectionTarget,\n    ssl: {\n      rejectUnauthorized: false\n    }\n  });\n\n  await client.connect();\n  return client;\n}\n\n// Функция для выполнения запроса с временным соединением\nexport async function withDbTransaction<T>(\n  callback: (db: ReturnType<typeof drizzleWithLogger>) => Promise<T>\n): Promise<T> {\n  const client = await getDbClient();\n\n  try {\n    // Создаем Drizzle DB с логированием для отладки\n    const db = drizzleWithLogger(client, {\n      schema,\n      logger: true  // Включаем логирование для просмотра запросов\n    });\n\n    const result = await callback(db);\n    return result;\n  } finally {\n    await client.end(); // Обязательно закрываем соединение\n  }\n}\n\n// Создаем Drizzle DB с логированием для совместимости с существующим кодом\nexport const db = drizzle(pool, {\n  schema,\n  logger: true  // Включаем логирование для просмотра запросов\n});\n\n// Экспортируем также функции для использования в API маршрутах\nexport { sql } from 'drizzle-orm';\n\n// Функция для создания временного соединения для миграций и инициализации\n// Использует DIRECT_URL (порт 5432) для прямого подключения\nexport async function createDirectDbConnection() {\n  let directUrl = process.env.DIRECT_URL || DATABASE_URL;\n\n  if (!directUrl) {\n    throw new Error(\"Either DIRECT_URL or DATABASE_URL must be set\");\n  }\n\n  directUrl = ensureSslMode(directUrl); // Добавляем sslmode=require\n\n  const { host: directHost, port: directPort } = parseConnectionString(directUrl);\n\n  console.log(\"Creating direct connection to host:\", directHost, \"on port:\", directPort);\n\n  const client = new Client({\n    connectionString: directUrl,\n    ssl: {\n      rejectUnauthorized: false\n    }\n  });\n\n  try {\n    await client.connect();\n\n    // Создаем Drizzle DB с логированием для совместимости\n    const directDb = drizzleWithLogger(client, {\n      schema,\n      logger: true  // Включаем логирование\n    });\n    return { db: directDb, client };\n  } catch (error) {\n    await client.end(); // Обязательно закрываем клиент при ошибке\n    throw error;\n  }\n}\n\n// Функция для выполнения запроса с временным соединением\nexport async function withTempDbConnection<T>(\n  callback: (db: ReturnType<typeof drizzleWithLogger>) => Promise<T>\n): Promise<T> {\n  const { db, client } = await createDirectDbConnection(); // Используем прямое соединение\n\n  try {\n    const result = await callback(db);\n    return result;\n  } finally {\n    // Всегда закрываем клиент соединения после использования\n    await client.end();\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 177, "column": 0}, "map": {"version":3,"sources":["file:///D:/BeadsLine/shared/schema.ts"],"sourcesContent":["import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, timestamp, boolean, jsonb, real, bigint, date, numeric } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\nexport const systemLogs = pgTable(\"system_logs\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  message: text(\"message\").notNull(),\n  timestamp: timestamp(\"timestamp\").defaultNow().notNull(),\n  data: jsonb(\"data\"),\n});\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  telegramId: varchar(\"telegram_id\", { length: 255 }).unique(),\n  username: text(\"username\").notNull(),\n  firstName: text(\"first_name\"),\n  lastName: text(\"last_name\"),\n  photoUrl: text(\"photo_url\"),\n  totalPoints: integer(\"total_points\").default(0).notNull(),\n  gamesPlayed: integer(\"games_played\").default(0).notNull(),\n  bestScore: integer(\"best_score\").default(0).notNull(),\n  isAdmin: boolean(\"is_admin\").default(false).notNull(),\n  btcBalance: real(\"btc_balance\").default(0).notNull(),\n  ethBalance: real(\"eth_balance\").default(0).notNull(),\n  usdtBalance: real(\"usdt_balance\").default(0).notNull(),\n  btcBalanceSats: bigint(\"btc_balance_sats\", { mode: \"number\" }).default(0).notNull(),\n  btcTodaySats: bigint(\"btc_today_sats\", { mode: \"number\" }).default(0).notNull(),\n  btcTodayDate: date(\"btc_today_date\"),\n  ethBalanceWei: bigint(\"eth_balance_wei\", { mode: \"number\" }).default(0).notNull(),\n  ethTodayWei: bigint(\"eth_today_wei\", { mode: \"number\" }).default(0).notNull(),\n  ethTodayDate: date(\"eth_today_date\"),\n  usdtToday: numeric(\"usdt_today\", { precision: 18, scale: 8 }).default(\"0\").notNull(),\n  usdtTodayDate: date(\"usdt_today_date\"),\n  referralCode: varchar(\"referral_code\", { length: 20 }).unique(),\n  referredBy: varchar(\"referred_by\", { length: 255 }),\n  directReferralsCount: integer(\"direct_referrals_count\").default(0).notNull(),\n  completedLevels: integer(\"completed_levels\").array().default([]).notNull(),\n  signupBonusReceived: boolean(\"signup_bonus_received\").default(false).notNull(),\n  ratingScore: integer(\"rating_score\").default(0).notNull(),\n  totalScore: integer(\"total_score\").default(0).notNull(),\n  totalWins: integer(\"total_wins\").default(0).notNull(),\n  currentWinStreak: integer(\"current_win_streak\").default(0).notNull(),\n  bestWinStreak: integer(\"best_win_streak\").default(0).notNull(),\n  totalCombo5Plus: integer(\"total_combo_5_plus\").default(0).notNull(),\n  // Character system\n  characterGender: varchar(\"character_gender\", { length: 10 }), // 'male' or 'female'\n  characterName: varchar(\"character_name\", { length: 50 }),\n  characterEnergy: integer(\"character_energy\").default(100).notNull(), // 0-100\n  characterHealthState: varchar(\"character_health_state\", { length: 20 }).default(\"normal\").notNull(), // 'normal', 'tired', 'sick'\n  characterMood: varchar(\"character_mood\", { length: 20 }).default(\"neutral\").notNull(), // 'happy', 'neutral', 'sad'\n  bonusLives: integer(\"bonus_lives\").default(0).notNull(), // бонусные жизни из BEADS BOX\n  lastActivityAt: timestamp(\"last_activity_at\").defaultNow().notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  deletedAt: timestamp(\"deleted_at\"),\n});\n\nexport const usersRelations = relations(users, ({ many }) => ({\n  gameScores: many(gameScores),\n}));\n\nexport const gameScores = pgTable(\"game_scores\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  odUserId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  levelId: integer(\"level_id\").default(1).notNull(),\n  score: integer(\"score\").notNull(),\n  cryptoBtc: integer(\"crypto_btc\").default(0).notNull(),\n  cryptoEth: integer(\"crypto_eth\").default(0).notNull(),\n  cryptoUsdt: integer(\"crypto_usdt\").default(0).notNull(),\n  maxCombo: integer(\"max_combo\").default(0).notNull(),\n  accuracy: integer(\"accuracy\").default(0).notNull(),\n  duration: integer(\"duration\").notNull(),\n  won: boolean(\"won\").default(false).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const gameScoresRelations = relations(gameScores, ({ one }) => ({\n  user: one(users, {\n    fields: [gameScores.odUserId],\n    references: [users.id],\n  }),\n}));\n\nexport const gameConfig = pgTable(\"game_config\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  key: varchar(\"key\", { length: 255 }).unique().notNull(),\n  value: jsonb(\"value\").notNull(),\n  description: text(\"description\"),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const prizePool = pgTable(\"prize_pool\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  totalAmount: integer(\"total_amount\").default(0).notNull(),\n  isActive: boolean(\"is_active\").default(false).notNull(),\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const usdtFundSettings = pgTable(\"usdt_fund_settings\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  usdtTotalFund: real(\"usdt_total_fund\").default(50).notNull(),\n  usdtAvailable: real(\"usdt_available\").default(50).notNull(),\n  usdtDailyLimit: real(\"usdt_daily_limit\").default(1.0).notNull(),\n  usdtPerDrop: real(\"usdt_per_drop\").default(0.02).notNull(),\n  usdtMaxPerUserPerDay: real(\"usdt_max_per_user_per_day\").default(0.1).notNull(),\n  usdtDistributedToday: real(\"usdt_distributed_today\").default(0).notNull(),\n  lastResetDate: timestamp(\"last_reset_date\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const realRewards = pgTable(\"real_rewards\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  cryptoType: varchar(\"crypto_type\", { length: 10 }).notNull(),\n  amount: real(\"amount\").notNull(),\n  balanceBefore: real(\"balance_before\").default(0),\n  balanceAfter: real(\"balance_after\").default(0),\n  description: varchar(\"description\", { length: 100 }),\n  gameScoreId: varchar(\"game_score_id\", { length: 255 }).references(() => gameScores.id),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const realRewardsRelations = relations(realRewards, ({ one }) => ({\n  user: one(users, {\n    fields: [realRewards.userId],\n    references: [users.id],\n  }),\n  gameScore: one(gameScores, {\n    fields: [realRewards.gameScoreId],\n    references: [gameScores.id],\n  }),\n}));\n\nexport const seasons = pgTable(\"seasons\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  seasonNumber: integer(\"season_number\").notNull().unique(),\n  month: integer(\"month\").notNull(),\n  year: integer(\"year\").notNull(),\n  startDate: timestamp(\"start_date\").notNull(),\n  endDate: timestamp(\"end_date\"),\n  isActive: boolean(\"is_active\").default(false).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const seasonResults = pgTable(\"season_results\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  seasonId: varchar(\"season_id\", { length: 255 }).notNull().references(() => seasons.id),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  leagueSlug: varchar(\"league_slug\", { length: 50 }).notNull(),\n  finalRatingScore: integer(\"final_rating_score\").notNull(),\n  finalRank: integer(\"final_rank\").notNull(),\n  totalWins: integer(\"total_wins\").default(0).notNull(),\n  totalGames: integer(\"total_games\").default(0).notNull(),\n  bestWinStreak: integer(\"best_win_streak\").default(0).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const seasonResultsRelations = relations(seasonResults, ({ one }) => ({\n  season: one(seasons, {\n    fields: [seasonResults.seasonId],\n    references: [seasons.id],\n  }),\n  user: one(users, {\n    fields: [seasonResults.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const referralRewards = pgTable(\"referral_rewards\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  refUserId: varchar(\"ref_user_id\", { length: 255 }).notNull().references(() => users.id),\n  level: integer(\"level\").notNull(),\n  beadsAmount: integer(\"beads_amount\").notNull(),\n  gameScoreId: varchar(\"game_score_id\", { length: 255 }).references(() => gameScores.id),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const referralRewardsRelations = relations(referralRewards, ({ one }) => ({\n  user: one(users, {\n    fields: [referralRewards.userId],\n    references: [users.id],\n  }),\n  refUser: one(users, {\n    fields: [referralRewards.refUserId],\n    references: [users.id],\n  }),\n  gameScore: one(gameScores, {\n    fields: [referralRewards.gameScoreId],\n    references: [gameScores.id],\n  }),\n}));\n\nexport const boosts = pgTable(\"boosts\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  type: varchar(\"type\", { length: 50 }).notNull().unique(),\n  nameRu: text(\"name_ru\").notNull(),\n  nameEn: text(\"name_en\").notNull(),\n  descriptionRu: text(\"description_ru\").notNull(),\n  descriptionEn: text(\"description_en\").notNull(),\n  icon: text(\"icon\").notNull(),\n  price: integer(\"price\").notNull(),\n  durationSeconds: integer(\"duration_seconds\").default(0).notNull(),\n  effectValue: real(\"effect_value\").default(0).notNull(),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  sortOrder: integer(\"sort_order\").default(0).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const userBoostInventory = pgTable(\"user_boost_inventory\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  boostId: varchar(\"boost_id\", { length: 255 }).notNull().references(() => boosts.id),\n  quantity: integer(\"quantity\").default(0).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const boostsRelations = relations(boosts, ({ many }) => ({\n  inventory: many(userBoostInventory),\n}));\n\nexport const userBoostInventoryRelations = relations(userBoostInventory, ({ one }) => ({\n  user: one(users, {\n    fields: [userBoostInventory.userId],\n    references: [users.id],\n  }),\n  boost: one(boosts, {\n    fields: [userBoostInventory.boostId],\n    references: [boosts.id],\n  }),\n}));\n\n// Game Skins - visual themes for the game (snake/balls appearance)\nexport const gameSkins = pgTable(\"game_skins\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 100 }).notNull().unique(),\n  nameRu: text(\"name_ru\").notNull(),\n  descriptionRu: text(\"description_ru\"),\n  previewImageUrl: text(\"preview_image_url\"),\n  skinType: varchar(\"skin_type\", { length: 20 }).notNull().default(\"game\"), // game, character\n  colorPrimary: varchar(\"color_primary\", { length: 20 }), // hex color for primary elements\n  colorSecondary: varchar(\"color_secondary\", { length: 20 }), // hex color for secondary elements\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// User owned skins\nexport const userSkins = pgTable(\"user_skins\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  skinId: varchar(\"skin_id\", { length: 255 }).notNull().references(() => gameSkins.id),\n  isActive: boolean(\"is_active\").default(false).notNull(), // currently active skin\n  acquiredAt: timestamp(\"acquired_at\").defaultNow().notNull(),\n});\n\nexport const gameSkinsRelations = relations(gameSkins, ({ many }) => ({\n  userSkins: many(userSkins),\n}));\n\nexport const userSkinsRelations = relations(userSkins, ({ one }) => ({\n  user: one(users, {\n    fields: [userSkins.userId],\n    references: [users.id],\n  }),\n  skin: one(gameSkins, {\n    fields: [userSkins.skinId],\n    references: [gameSkins.id],\n  }),\n}));\n\n// Boost Packages - bundles of all 7 boost types for purchase with Telegram Stars or Crypto\nexport const boostPackages = pgTable(\"boost_packages\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 100 }).notNull(),\n  nameRu: text(\"name_ru\").notNull(),\n  boostsPerType: integer(\"boosts_per_type\").notNull(), // количество каждого типа буста\n  priceStars: integer(\"price_stars\").notNull(), // цена в Telegram Stars\n  priceUsd: numeric(\"price_usd\", { precision: 10, scale: 2 }), // цена в USD для криптоплатежей\n  originalPriceStars: integer(\"original_price_stars\"), // перечёркнутая цена (если есть скидка)\n  badge: varchar(\"badge\", { length: 50 }), // бейдж: \"hot\", \"best_value\", null\n  badgeText: text(\"badge_text\"), // текст бейджа: \"ХИТ ПРОДАЖ!\", \"ЛУЧШАЯ ЦЕНА!\"\n  bonusLives: integer(\"bonus_lives\").default(0).notNull(), // бонусные жизни\n  bonusSkinId: varchar(\"bonus_skin_id\", { length: 255 }).references(() => gameSkins.id), // ID бонусного скина\n  sortOrder: integer(\"sort_order\").default(0).notNull(),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\n// Purchase history for boost packages\nexport const boostPackagePurchases = pgTable(\"boost_package_purchases\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  packageId: varchar(\"package_id\", { length: 255 }).notNull().references(() => boostPackages.id),\n  telegramPaymentId: varchar(\"telegram_payment_id\", { length: 255 }),\n  priceStars: integer(\"price_stars\").notNull(),\n  boostsPerType: integer(\"boosts_per_type\").notNull(),\n  bonusLives: integer(\"bonus_lives\").default(0).notNull(),\n  status: varchar(\"status\", { length: 20 }).default(\"pending\").notNull(), // pending, completed, failed\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\n// Manual crypto payment requests (semi-automatic)\nexport const cryptoPayments = pgTable(\"crypto_payments\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  packageId: varchar(\"package_id\", { length: 255 }).notNull().references(() => boostPackages.id),\n  network: varchar(\"network\", { length: 30 }).notNull(), // usdt_trc20, usdt_bep20, usdt_erc20, usdt_ton\n  priceUsd: numeric(\"price_usd\", { precision: 10, scale: 2 }).notNull(), // price in USD\n  status: varchar(\"status\", { length: 30 }).default(\"pending\").notNull(), // pending, confirmed, rejected\n  adminNote: text(\"admin_note\"), // note from admin when confirming/rejecting\n  confirmedBy: varchar(\"confirmed_by\", { length: 255 }), // admin who confirmed\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const cryptoPaymentsRelations = relations(cryptoPayments, ({ one }) => ({\n  user: one(users, {\n    fields: [cryptoPayments.userId],\n    references: [users.id],\n  }),\n  package: one(boostPackages, {\n    fields: [cryptoPayments.packageId],\n    references: [boostPackages.id],\n  }),\n}));\n\nexport const boostPackagesRelations = relations(boostPackages, ({ many }) => ({\n  purchases: many(boostPackagePurchases),\n}));\n\nexport const boostPackagePurchasesRelations = relations(boostPackagePurchases, ({ one }) => ({\n  user: one(users, {\n    fields: [boostPackagePurchases.userId],\n    references: [users.id],\n  }),\n  package: one(boostPackages, {\n    fields: [boostPackagePurchases.packageId],\n    references: [boostPackages.id],\n  }),\n}));\n\nexport const beadsTransactions = pgTable(\"beads_transactions\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).references(() => users.id),\n  type: varchar(\"type\", { length: 50 }).notNull(),\n  amount: integer(\"amount\").notNull(),\n  balanceBefore: integer(\"balance_before\").notNull(),\n  balanceAfter: integer(\"balance_after\").notNull(),\n  houseBalanceBefore: integer(\"house_balance_before\"),\n  houseBalanceAfter: integer(\"house_balance_after\"),\n  description: text(\"description\"),\n  gameScoreId: varchar(\"game_score_id\", { length: 255 }).references(() => gameScores.id),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  deletedAt: timestamp(\"deleted_at\"),\n  deletedBy: varchar(\"deleted_by\", { length: 255 }),\n  deleteReason: text(\"delete_reason\"),\n});\n\nexport const beadsTransactionsRelations = relations(beadsTransactions, ({ one }) => ({\n  user: one(users, {\n    fields: [beadsTransactions.userId],\n    references: [users.id],\n  }),\n  gameScore: one(gameScores, {\n    fields: [beadsTransactions.gameScoreId],\n    references: [gameScores.id],\n  }),\n}));\n\n// Character System Tables\nexport const characters = pgTable(\"characters\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id).unique(),\n  name: text(\"name\").notNull(),\n  gender: varchar(\"gender\", { length: 10 }).notNull(),\n  hunger: integer(\"hunger\").default(100).notNull(),\n  thirst: integer(\"thirst\").default(100).notNull(),\n  fatigue: integer(\"fatigue\").default(0).notNull(),\n  lastCareAt: timestamp(\"last_care_at\").defaultNow(),\n  careCooldowns: text(\"care_cooldowns\").default('{}'),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const accessoryCategories = pgTable(\"accessory_categories\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\", { length: 50 }).notNull().unique(),\n  nameRu: text(\"name_ru\").notNull(),\n  slot: varchar(\"slot\", { length: 20 }).notNull(),\n  sortOrder: integer(\"sort_order\").default(0).notNull(),\n});\n\nexport const baseBodies = pgTable(\"base_bodies\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  gender: varchar(\"gender\", { length: 10 }).notNull(),\n  imageUrl: text(\"image_url\").notNull(),\n  isDefault: boolean(\"is_default\").default(false).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const accessories = pgTable(\"accessories\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  categoryId: varchar(\"category_id\", { length: 255 }).notNull().references(() => accessoryCategories.id),\n  name: varchar(\"name\", { length: 100 }).notNull(),\n  nameRu: text(\"name_ru\").notNull(),\n  descriptionRu: text(\"description_ru\"),\n  imageUrl: text(\"image_url\").notNull(),\n  gender: varchar(\"gender\", { length: 10 }).notNull(),\n  positionX: integer(\"position_x\").default(0).notNull(),\n  positionY: integer(\"position_y\").default(0).notNull(),\n  zIndex: integer(\"z_index\").default(1).notNull(),\n  scale: numeric(\"scale\", { precision: 5, scale: 2 }).default(\"1.0\").notNull(),\n  price: integer(\"price\").default(100).notNull(),\n  maxQuantity: integer(\"max_quantity\"),\n  soldCount: integer(\"sold_count\").default(0).notNull(),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const userAccessories = pgTable(\"user_accessories\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  accessoryId: varchar(\"accessory_id\", { length: 255 }).notNull().references(() => accessories.id),\n  isEquipped: boolean(\"is_equipped\").default(false).notNull(),\n  purchasedAt: timestamp(\"purchased_at\").defaultNow().notNull(),\n});\n\nexport const charactersRelations = relations(characters, ({ one }) => ({\n  user: one(users, {\n    fields: [characters.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const accessoriesRelations = relations(accessories, ({ one, many }) => ({\n  category: one(accessoryCategories, {\n    fields: [accessories.categoryId],\n    references: [accessoryCategories.id],\n  }),\n  userAccessories: many(userAccessories),\n}));\n\nexport const userAccessoriesRelations = relations(userAccessories, ({ one }) => ({\n  user: one(users, {\n    fields: [userAccessories.userId],\n    references: [users.id],\n  }),\n  accessory: one(accessories, {\n    fields: [userAccessories.accessoryId],\n    references: [accessories.id],\n  }),\n}));\n\nexport const leagues = pgTable(\"leagues\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  slug: varchar(\"slug\", { length: 50 }).notNull().unique(),\n  nameRu: text(\"name_ru\").notNull(),\n  nameEn: text(\"name_en\").notNull(),\n  icon: text(\"icon\").notNull(),\n  minBeads: integer(\"min_beads\").default(0).notNull(),\n  maxRank: integer(\"max_rank\"),\n  themeColor: varchar(\"theme_color\", { length: 20 }).notNull(),\n  sortOrder: integer(\"sort_order\").default(0).notNull(),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const insertLeagueSchema = createInsertSchema(leagues).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const updateLeagueSchema = z.object({\n  nameRu: z.string().optional(),\n  nameEn: z.string().optional(),\n  icon: z.string().optional(),\n  minBeads: z.number().int().optional(),\n  maxRank: z.number().int().optional().nullable(),\n  themeColor: z.string().optional(),\n  sortOrder: z.number().int().optional(),\n  isActive: z.boolean().optional(),\n});\n\nexport type InsertLeague = z.infer<typeof insertLeagueSchema>;\nexport type League = typeof leagues.$inferSelect;\n\nexport const insertBeadsTransactionSchema = createInsertSchema(beadsTransactions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  totalPoints: true,\n  gamesPlayed: true,\n  bestScore: true,\n  isAdmin: true,\n  completedLevels: true,\n  createdAt: true,\n});\n\nexport const insertGameScoreSchema = createInsertSchema(gameScores, {\n  score: z.number().int().min(0, \"Score cannot be negative\").max(100000, \"Score is unrealistically high\"),\n  cryptoBtc: z.number().int().min(0).max(100, \"Too many BTC collected\"),\n  cryptoEth: z.number().int().min(0).max(100, \"Too many ETH collected\"),\n  cryptoUsdt: z.number().int().min(0).max(100, \"Too many USDT collected\"),\n  maxCombo: z.number().int().min(0).max(500, \"Max combo is unrealistically high\"),\n  accuracy: z.number().int().min(0).max(100, \"Accuracy must be between 0 and 100\"),\n  duration: z.number().int().min(0).max(300, \"Game duration is out of bounds\"), // Allows for up to 5 minutes for games with extra lives\n}).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertGameConfigSchema = createInsertSchema(gameConfig).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport const insertPrizePoolSchema = createInsertSchema(prizePool).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertUsdtFundSettingsSchema = createInsertSchema(usdtFundSettings).omit({\n  id: true,\n  updatedAt: true,\n});\n\nexport const insertRealRewardSchema = createInsertSchema(realRewards).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertSeasonSchema = createInsertSchema(seasons).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertSeasonResultSchema = createInsertSchema(seasonResults).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertSeason = z.infer<typeof insertSeasonSchema>;\nexport type Season = typeof seasons.$inferSelect;\nexport type InsertSeasonResult = z.infer<typeof insertSeasonResultSchema>;\nexport type SeasonResult = typeof seasonResults.$inferSelect;\n\nexport const insertReferralRewardSchema = createInsertSchema(referralRewards).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertBoostSchema = createInsertSchema(boosts).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertUserBoostInventorySchema = createInsertSchema(userBoostInventory).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\n// Character System Insert Schemas\nexport const insertCharacterSchema = createInsertSchema(characters).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertAccessoryCategorySchema = createInsertSchema(accessoryCategories).omit({\n  id: true,\n});\n\nexport const insertBaseBodySchema = createInsertSchema(baseBodies).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertAccessorySchema = createInsertSchema(accessories).omit({\n  id: true,\n  soldCount: true,\n  createdAt: true,\n});\n\nexport const insertUserAccessorySchema = createInsertSchema(userAccessories).omit({\n  id: true,\n  purchasedAt: true,\n});\n\n// Boost Packages Insert Schemas\nexport const insertGameSkinSchema = createInsertSchema(gameSkins).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport const insertUserSkinSchema = createInsertSchema(userSkins).omit({\n  id: true,\n  acquiredAt: true,\n});\n\nexport const insertBoostPackageSchema = createInsertSchema(boostPackages).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\n\nexport const insertBoostPackagePurchaseSchema = createInsertSchema(boostPackagePurchases).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertGameScore = z.infer<typeof insertGameScoreSchema>;\nexport type GameScore = typeof gameScores.$inferSelect;\nexport type InsertGameConfig = z.infer<typeof insertGameConfigSchema>;\nexport type GameConfig = typeof gameConfig.$inferSelect;\nexport type InsertPrizePool = z.infer<typeof insertPrizePoolSchema>;\nexport type PrizePool = typeof prizePool.$inferSelect;\nexport type InsertUsdtFundSettings = z.infer<typeof insertUsdtFundSettingsSchema>;\nexport type UsdtFundSettings = typeof usdtFundSettings.$inferSelect;\nexport type InsertRealReward = z.infer<typeof insertRealRewardSchema>;\nexport type RealReward = typeof realRewards.$inferSelect;\nexport type InsertReferralReward = z.infer<typeof insertReferralRewardSchema>;\nexport type ReferralReward = typeof referralRewards.$inferSelect;\nexport type InsertBeadsTransaction = z.infer<typeof insertBeadsTransactionSchema>;\nexport type BeadsTransaction = typeof beadsTransactions.$inferSelect;\nexport type InsertBoost = z.infer<typeof insertBoostSchema>;\nexport type Boost = typeof boosts.$inferSelect;\nexport type InsertUserBoostInventory = z.infer<typeof insertUserBoostInventorySchema>;\nexport type UserBoostInventory = typeof userBoostInventory.$inferSelect;\n\n// Character System Types\nexport type InsertCharacter = z.infer<typeof insertCharacterSchema>;\nexport type Character = typeof characters.$inferSelect;\nexport type InsertAccessoryCategory = z.infer<typeof insertAccessoryCategorySchema>;\nexport type AccessoryCategory = typeof accessoryCategories.$inferSelect;\nexport type InsertBaseBody = z.infer<typeof insertBaseBodySchema>;\nexport type BaseBody = typeof baseBodies.$inferSelect;\nexport type InsertAccessory = z.infer<typeof insertAccessorySchema>;\nexport type Accessory = typeof accessories.$inferSelect;\nexport type InsertUserAccessory = z.infer<typeof insertUserAccessorySchema>;\nexport type UserAccessory = typeof userAccessories.$inferSelect;\n\n// Boost Package Types\nexport type InsertGameSkin = z.infer<typeof insertGameSkinSchema>;\nexport type GameSkin = typeof gameSkins.$inferSelect;\nexport type InsertUserSkin = z.infer<typeof insertUserSkinSchema>;\nexport type UserSkin = typeof userSkins.$inferSelect;\nexport type InsertBoostPackage = z.infer<typeof insertBoostPackageSchema>;\nexport type BoostPackage = typeof boostPackages.$inferSelect;\nexport type InsertBoostPackagePurchase = z.infer<typeof insertBoostPackagePurchaseSchema>;\nexport type BoostPackagePurchase = typeof boostPackagePurchases.$inferSelect;\n\nexport const insertCryptoPaymentSchema = createInsertSchema(cryptoPayments).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n});\nexport type InsertCryptoPayment = z.infer<typeof insertCryptoPaymentSchema>;\nexport type CryptoPayment = typeof cryptoPayments.$inferSelect;\n\n// Team members for revenue distribution\nexport const teamMembers = pgTable(\"team_members\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  role: text(\"role\"),\n  sharePercent: real(\"share_percent\").default(15).notNull(),\n  totalEarnedStars: integer(\"total_earned_stars\").default(0).notNull(),\n  totalEarnedUsd: numeric(\"total_earned_usd\", { precision: 12, scale: 2 }).default(\"0\").notNull(),\n  isActive: boolean(\"is_active\").default(true).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const insertTeamMemberSchema = createInsertSchema(teamMembers).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertTeamMember = z.infer<typeof insertTeamMemberSchema>;\nexport type TeamMember = typeof teamMembers.$inferSelect;\n\n// Revenue distribution shares tracking\nexport const revenueShares = pgTable(\"revenue_shares\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  purchaseId: varchar(\"purchase_id\", { length: 255 }),\n  cryptoPaymentId: varchar(\"crypto_payment_id\", { length: 255 }),\n  paymentType: varchar(\"payment_type\", { length: 20 }).notNull(), // 'stars' or 'crypto'\n  totalStars: integer(\"total_stars\").default(0).notNull(),\n  totalUsd: numeric(\"total_usd\", { precision: 12, scale: 2 }).default(\"0\").notNull(),\n  developmentStars: integer(\"development_stars\").default(0).notNull(),\n  developmentUsd: numeric(\"development_usd\", { precision: 12, scale: 2 }).default(\"0\").notNull(),\n  advertisingStars: integer(\"advertising_stars\").default(0).notNull(),\n  advertisingUsd: numeric(\"advertising_usd\", { precision: 12, scale: 2 }).default(\"0\").notNull(),\n  teamSharesJson: jsonb(\"team_shares_json\").default({}).notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const insertRevenueShareSchema = createInsertSchema(revenueShares).omit({\n  id: true,\n  createdAt: true,\n});\nexport type InsertRevenueShare = z.infer<typeof insertRevenueShareSchema>;\nexport type RevenueShare = typeof revenueShares.$inferSelect;\n\n// Crypto withdrawal requests (semi-automatic)\nexport const withdrawalRequests = pgTable(\"withdrawal_requests\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  cryptoType: varchar(\"crypto_type\", { length: 10 }).notNull(), // 'btc', 'eth', 'usdt'\n  network: varchar(\"network\", { length: 20 }), // 'bep20', 'trc20', 'erc20', 'btc', 'eth', 'ton'\n  amount: numeric(\"amount\", { precision: 18, scale: 8 }).notNull(),\n  walletAddress: text(\"wallet_address\").notNull(),\n  networkFee: numeric(\"network_fee\", { precision: 18, scale: 8 }).default(\"0\").notNull(),\n  status: varchar(\"status\", { length: 20 }).default(\"pending\").notNull(), // 'pending', 'approved', 'rejected', 'completed'\n  adminNote: text(\"admin_note\"),\n  txHash: text(\"tx_hash\"), // Transaction hash after completion\n  processedAt: timestamp(\"processed_at\"),\n  processedBy: varchar(\"processed_by\", { length: 255 }).references(() => users.id),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const withdrawalRequestsRelations = relations(withdrawalRequests, ({ one }) => ({\n  user: one(users, {\n    fields: [withdrawalRequests.userId],\n    references: [users.id],\n  }),\n  processedByUser: one(users, {\n    fields: [withdrawalRequests.processedBy],\n    references: [users.id],\n  }),\n}));\n\nexport const insertWithdrawalRequestSchema = createInsertSchema(withdrawalRequests).omit({\n  id: true,\n  status: true,\n  adminNote: true,\n  txHash: true,\n  processedAt: true,\n  processedBy: true,\n  createdAt: true,\n});\nexport type InsertWithdrawalRequest = z.infer<typeof insertWithdrawalRequestSchema>;\nexport type WithdrawalRequest = typeof withdrawalRequests.$inferSelect;\n\n// Withdrawal config interface\nexport interface WithdrawalConfig {\n  btc: {\n    minAmount: number;\n    networkFee: number;\n    enabled: boolean;\n  };\n  eth: {\n    minAmount: number;\n    networkFee: number;\n    enabled: boolean;\n  };\n  usdt: {\n    bep20: { minAmount: number; networkFee: number; enabled: boolean };\n    trc20: { minAmount: number; networkFee: number; enabled: boolean };\n    erc20: { minAmount: number; networkFee: number; enabled: boolean };\n    ton: { minAmount: number; networkFee: number; enabled: boolean };\n  };\n}\n\n// Revenue summary config\nexport interface RevenueSummary {\n  totalSalesStars: number;\n  totalSalesUsd: number;\n  developmentStars: number;\n  developmentUsd: number;\n  advertisingStars: number;\n  advertisingUsd: number;\n  teamShares: { memberId: string; name: string; stars: number; usd: number }[];\n  salesCount: number;\n  starsSalesCount: number;\n  cryptoSalesCount: number;\n}\n\nexport type GenderType = 'male' | 'female';\nexport type AccessoryGenderType = 'male' | 'female' | 'both';\nexport type SlotType = 'head' | 'eyes' | 'face' | 'body' | 'background';\n\nexport interface CharacterWithAccessories {\n  character: Character;\n  baseBody: BaseBody | null;\n  equippedAccessories: (UserAccessory & { accessory: Accessory })[];\n}\n\nexport type BoostType = 'slowdown' | 'bomb' | 'rainbow' | 'rewind';\n\nexport type TransactionType = \n  | 'game_win_reward'\n  | 'buy_extra_life'\n  | 'buy_boost'\n  | 'referral_reward'\n  | 'admin_adjustment'\n  | 'house_deposit'\n  | 'house_withdrawal'\n  | 'signup_bonus'\n  | 'beads_box_reward';\n\nexport interface HouseAccountConfig {\n  balance: number;\n  salesIncome: number;\n  totalDistributed: number;\n  lastUpdated: string;\n}\n\nexport interface LivesConfig {\n  livesPerGame: number;\n  extraLifeCost: number;\n  extraLifeSeconds: number;\n  maxExtraLives: number;\n}\n\nexport type BallColor = 'red' | 'blue' | 'green' | 'yellow' | 'purple' | 'cyan' | 'magenta' | 'amber' | 'lime' | 'violet';\nexport type CryptoType = 'btc' | 'eth' | 'usdt';\n\nexport interface Ball {\n  id: string;\n  x: number;\n  y: number;\n  color: BallColor;\n  crypto?: CryptoType;\n  isUsdtFund?: boolean;\n  isRainbow?: boolean;\n  radius: number;\n  pathProgress: number;\n  spawnAnimStart?: number;\n}\n\nexport interface GameState {\n  balls: Ball[];\n  shooterBall: Ball | null;\n  nextBall: Ball | null;\n  score: number;\n  combo: number;\n  maxCombo: number;\n  timeLeft: number;\n  cryptoCollected: {\n    btc: number;\n    eth: number;\n    usdt: number;\n  };\n  usdtFundCollected: number;\n  isPlaying: boolean;\n  isGameOver: boolean;\n  won: boolean;\n  shotsTotal: number;\n  shotsHit: number;\n  lives: number;\n  extraLivesBought: number;\n  totalBallsSpawned: number;\n}\n\nexport interface LeaderboardEntry {\n  rank: number;\n  userId: string;\n  username: string;\n  photoUrl: string | null;\n  totalPoints: number;\n  ratingScore: number;\n  gamesPlayed: number;\n  bestScore: number;\n  characterName: string | null;\n  characterImageUrl: string | null;\n}\n\nexport interface AdminCryptoBalances {\n  btc: number;\n  eth: number;\n  usdt: number;\n}\n\nexport interface UserUpdate {\n  username?: string;\n  totalPoints?: number;\n  gamesPlayed?: number;\n  bestScore?: number;\n  isAdmin?: boolean;\n  btcBalance?: number;\n  ethBalance?: number;\n  usdtBalance?: number;\n  btcBalanceSats?: number;\n  ethBalanceWei?: number;\n  referredBy?: string | null;\n  directReferralsCount?: number;\n  completedLevels?: number[];\n  characterGender?: string;\n  characterName?: string;\n  characterEnergy?: number;\n  characterHealthState?: string;\n  characterMood?: string;\n  bonusLives?: number;\n  lastActivityAt?: Date;\n}\n\nexport interface UsdtFundStats {\n  settings: UsdtFundSettings;\n  totalDistributed: number;\n  distributedToday: number;\n}\n\nexport interface RewardResult {\n  usdtAwarded: number;\n  rewardId?: string;\n}\n\nexport interface GameEconomyConfig {\n  points: {\n    normal: number;\n    btc: number;\n    eth: number;\n    usdt: number;\n  };\n  combo: {\n    multiplier: number;\n    maxChain: number;\n  };\n  crypto: {\n    spawnChance: number;\n  };\n  cryptoRewards: {\n    btcPerBall: number;\n    ethPerBall: number;\n    usdtPerBall: number;\n  };\n  dailyLimits: {\n    btcMaxSatsPerDay: number;\n    ethMaxWeiPerDay: number;\n    usdtMaxPerDay: number;\n  };\n  pools: {\n    btcBalanceSats: number;\n    ethBalanceWei: number;\n    usdtBalance: number;\n  };\n  perGameLimits: {\n    btcMaxBeadsPerGame: number;\n    ethMaxBeadsPerGame: number;\n    usdtMaxBeadsPerGame: number;\n  };\n}\n\nexport interface CryptoAvailability {\n  btcEnabled: boolean;\n  ethEnabled: boolean;\n  usdtEnabled: boolean;\n  btcRemainingToday: number;\n  ethRemainingToday: number;\n  usdtRemainingToday: number;\n  btcMaxBeadsPerGame: number;\n  ethMaxBeadsPerGame: number;\n  usdtMaxBeadsPerGame: number;\n}\n\nexport interface ReferralConfig {\n  maxDirectReferralsPerUser: number;\n  level1RewardPercent: number;\n  level2RewardPercent: number;\n  maxReferralBeadsPerRefPerDay: number;\n  maxReferralBeadsPerUserPerDay: number;\n  title: string;\n  description: string;\n}\n\nexport interface ReferralInfo {\n  referralCode: string;\n  referralLink: string;\n  directReferralsCount: number;\n  level2ReferralsCount: number;\n  totalEarnedBeads: number;\n  referralsTotalBeads: number;\n  lastRewardId?: string;\n}\n\nexport interface ReferralUserStats {\n  userId: string;\n  username: string;\n  referralCode: string | null;\n  referredBy: string | null;\n  referredByUsername: string | null;\n  level1ReferralsCount: number;\n  level2ReferralsCount: number;\n  totalReferralBeads: number;\n}\n\nexport interface GameplayConfig {\n  balls: {\n    initialCount: number;\n    targetCount: number;\n    maxTotalBalls: number;\n  };\n  spawn: {\n    period: number;\n    resumeThreshold: number;\n  };\n  speed: {\n    base: number;\n    max: number;\n    accelerationStart: number;\n  };\n  colors: {\n    count: number;\n    activeColors?: string[];\n  };\n}\n\n// ===== BEADS BOX SYSTEM =====\n\n// Stores each user's daily box session\nexport const beadsBoxSessions = pgTable(\"beads_box_sessions\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  sessionDate: date(\"session_date\").notNull(),\n  boxes: jsonb(\"boxes\").notNull(), // Array of 6 box rewards generated for this session\n  selectedBoxIndex: integer(\"selected_box_index\"), // 0-5, null if not selected yet\n  rewardClaimed: boolean(\"reward_claimed\").default(false).notNull(),\n  rewardType: varchar(\"reward_type\", { length: 50 }), // beads, boost, lives, crypto_ticket\n  rewardValue: jsonb(\"reward_value\"), // { amount: 100 } or { boostId: \"...\", quantity: 1 }\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  claimedAt: timestamp(\"claimed_at\"),\n});\n\nexport const insertBeadsBoxSessionSchema = createInsertSchema(beadsBoxSessions).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type BeadsBoxSession = typeof beadsBoxSessions.$inferSelect;\nexport type InsertBeadsBoxSession = z.infer<typeof insertBeadsBoxSessionSchema>;\n\n// Crypto game tickets earned from BEADS BOX special prize\nexport const cryptoGameTickets = pgTable(\"crypto_game_tickets\", {\n  id: varchar(\"id\", { length: 255 }).primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\", { length: 255 }).notNull().references(() => users.id),\n  sourceSessionId: varchar(\"source_session_id\", { length: 255 }).references(() => beadsBoxSessions.id),\n  status: varchar(\"status\", { length: 20 }).default(\"available\").notNull(), // available, used, expired\n  usedAt: timestamp(\"used_at\"),\n  gameScoreId: varchar(\"game_score_id\", { length: 255 }).references(() => gameScores.id),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  expiresAt: timestamp(\"expires_at\"), // Optional expiration\n});\n\nexport const insertCryptoGameTicketSchema = createInsertSchema(cryptoGameTickets).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type CryptoGameTicket = typeof cryptoGameTickets.$inferSelect;\nexport type InsertCryptoGameTicket = z.infer<typeof insertCryptoGameTicketSchema>;\n\n// Box reward types\nexport type BeadsBoxRewardType = 'beads' | 'boost' | 'lives' | 'crypto_ticket';\n\nexport interface BeadsBoxReward {\n  type: BeadsBoxRewardType;\n  value: number; // For beads/lives: amount. For boost: quantity.\n  boostId?: string; // For boost type\n  boostType?: string; // For display purposes\n}\n\nexport interface BeadsBoxConfig {\n  enabled: boolean;\n  boxCount: number; // Default 6\n  rewards: {\n    beads: { min: number; max?: number; weight: number };\n    boost: { quantity: number; weight: number };\n    lives: { min: number; max?: number; weight: number };\n    cryptoTicket: { weight: number }; // Only for level 10+ players\n  };\n  cryptoTicketMinLevel: number; // Minimum completed levels to get crypto ticket\n}\n\nexport const updateBeadsBoxConfigSchema = z.object({\n  enabled: z.boolean().optional(),\n  boxCount: z.number().int().min(1).max(10).optional(),\n  rewards: z.object({\n    beads: z.object({\n      min: z.number().int().min(0),\n      max: z.number().int().min(0).optional(), // max >= min\n      weight: z.number().min(0),\n    }).default({ min: 10, max: 100, weight: 40 }),\n    boost: z.object({\n      quantity: z.number().int().min(0),\n      weight: z.number().min(0),\n    }).default({ quantity: 1, weight: 20 }),\n    lives: z.object({\n      min: z.number().int().min(0),\n      max: z.number().int().min(0).optional(), // max >= min\n      weight: z.number().min(0),\n    }).default({ min: 1, max: 3, weight: 30 }),\n    cryptoTicket: z.object({\n      weight: z.number().min(0),\n    }).default({ weight: 10 }),\n  }).default({\n    beads: { min: 10, max: 100, weight: 40 },\n    boost: { quantity: 1, weight: 20 },\n    lives: { min: 1, max: 3, weight: 30 },\n    cryptoTicket: { weight: 10 },\n  }),\n  cryptoTicketMinLevel: z.number().int().min(0).optional(),\n});\n\nexport const adminUserUpdateSchema = z.object({\n  username: z.string().min(1).optional(),\n  totalPoints: z.number().int().optional(),\n  gamesPlayed: z.number().int().optional(),\n  bestScore: z.number().int().optional(),\n  isAdmin: z.boolean().optional(),\n  btcBalanceSats: z.number().int().optional(),\n  ethBalanceWei: z.number().int().optional(),\n  usdtBalance: z.number().optional(),\n  referredBy: z.string().nullable().optional(),\n});\n\nexport const adminUserIsAdminUpdateSchema = z.object({\n  isAdmin: z.boolean(),\n});\n\nexport const updateFundTogglesSchema = z.object({\n  cryptoFundEnabled: z.boolean().optional(),\n  usdtFundEnabled: z.boolean().optional(),\n});\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1401, "column": 0}, "map": {"version":3,"sources":["file:///D:/BeadsLine/pages/api/auth/me.ts"],"sourcesContent":["// pages/api/auth/me.ts\nimport type { NextApiRequest, NextApiResponse } from 'next';\nimport { db } from '../../../server/db';\nimport { users } from '@shared/schema';\nimport { eq } from 'drizzle-orm';\n\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\n  if (req.method !== 'GET') {\n    return res.status(405).json({ error: 'Method not allowed' });\n  }\n\n  try {\n    // Получаем ID пользователя из сессии или заголовков (в зависимости от вашей системы аутентификации)\n    // В данном случае предполагаем, что ID пользователя передается в заголовке или сессии\n    const userId = req.headers['x-user-id'] as string || req.cookies?.userId;\n\n    if (!userId) {\n      return res.status(401).json({ error: 'User not authenticated' });\n    }\n\n    // Проверяем, существует ли пользователь в базе данных\n    let user = await db.select().from(users).where(eq(users.id, userId)).limit(1);\n\n    if (user.length === 0) {\n      // Если пользователя нет, создаем его\n      const newUser = await db.insert(users).values({\n        id: userId,\n        username: `user_${Date.now()}`,\n        totalPoints: 0,\n        gamesPlayed: 0,\n        bestScore: 0,\n        isAdmin: false,\n        btcBalance: 0,\n        ethBalance: 0,\n        usdtBalance: 0,\n        btcBalanceSats: 0n,\n        btcTodaySats: 0n,\n        ethBalanceWei: 0n,\n        ethTodayWei: 0n,\n        usdtToday: \"0\",\n        referralCode: `REF_${Math.random().toString(36).substring(2, 10).toUpperCase()}`,\n        directReferralsCount: 0,\n        completedLevels: [],\n        signupBonusReceived: false,\n        ratingScore: 0,\n        totalScore: 0,\n        totalWins: 0,\n        currentWinStreak: 0,\n        bestWinStreak: 0,\n        totalCombo5Plus: 0,\n        characterEnergy: 100,\n        bonusLives: 0,\n        lastActivityAt: new Date(),\n        createdAt: new Date(),\n      }).returning();\n\n      user = newUser;\n    } else {\n      // Обновляем время последней активности\n      await db.update(users).set({ lastActivityAt: new Date() }).where(eq(users.id, userId));\n    }\n\n    // Возвращаем данные пользователя\n    res.status(200).json(user[0]);\n  } catch (error) {\n    console.error('Error in /api/auth/me:', error);\n    res.status(500).json({ error: 'Internal server error' });\n  }\n}"],"names":[],"mappings":"AAAA,uBAAuB;;;;;AAEvB;AACA;AACA;;;;;;;;;;AAEe,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC7E,IAAI,IAAI,MAAM,KAAK,OAAO;QACxB,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IAC5D;IAEA,IAAI;QACF,oGAAoG;QACpG,sFAAsF;QACtF,MAAM,SAAS,IAAI,OAAO,CAAC,YAAY,IAAc,IAAI,OAAO,EAAE;QAElE,IAAI,CAAC,QAAQ;YACX,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAAE,OAAO;YAAyB;QAChE;QAEA,sDAAsD;QACtD,IAAI,OAAO,MAAM,2HAAE,CAAC,MAAM,GAAG,IAAI,CAAC,kHAAK,EAAE,KAAK,CAAC,IAAA,uLAAE,EAAC,kHAAK,CAAC,EAAE,EAAE,SAAS,KAAK,CAAC;QAE3E,IAAI,KAAK,MAAM,KAAK,GAAG;YACrB,qCAAqC;YACrC,MAAM,UAAU,MAAM,2HAAE,CAAC,MAAM,CAAC,kHAAK,EAAE,MAAM,CAAC;gBAC5C,IAAI;gBACJ,UAAU,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;gBAC9B,aAAa;gBACb,aAAa;gBACb,WAAW;gBACX,SAAS;gBACT,YAAY;gBACZ,YAAY;gBACZ,aAAa;gBACb,gBAAgB,EAAE;gBAClB,cAAc,EAAE;gBAChB,eAAe,EAAE;gBACjB,aAAa,EAAE;gBACf,WAAW;gBACX,cAAc,CAAC,IAAI,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,IAAI,WAAW,IAAI;gBAChF,sBAAsB;gBACtB,iBAAiB,EAAE;gBACnB,qBAAqB;gBACrB,aAAa;gBACb,YAAY;gBACZ,WAAW;gBACX,kBAAkB;gBAClB,eAAe;gBACf,iBAAiB;gBACjB,iBAAiB;gBACjB,YAAY;gBACZ,gBAAgB,IAAI;gBACpB,WAAW,IAAI;YACjB,GAAG,SAAS;YAEZ,OAAO;QACT,OAAO;YACL,uCAAuC;YACvC,MAAM,2HAAE,CAAC,MAAM,CAAC,kHAAK,EAAE,GAAG,CAAC;gBAAE,gBAAgB,IAAI;YAAO,GAAG,KAAK,CAAC,IAAA,uLAAE,EAAC,kHAAK,CAAC,EAAE,EAAE;QAChF;QAEA,iCAAiC;QACjC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE;IAC9B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAwB;IACxD;AACF"}}]
}